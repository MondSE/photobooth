(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[20],{24:(e,t,r)=>{Promise.resolve().then(r.bind(r,7492))},1469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return l},getImageProps:function(){return s}});let i=r(8229),n=r(8883),o=r(3063),a=i._(r(1193));function s(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:a.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/photobooth/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let l=o.Image},3429:function(e,t,r){var i;i=r(2115),e.exports=function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,(function(t){return e[t]}).bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,r){"use strict";r.r(t);var i,n=r("react"),o=(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(){return(a=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},s=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r};function l(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}"undefined"!=typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise(function(r,i){t.call(navigator,e,r,i)}):Promise.reject(Error("getUserMedia is not implemented in this browser"))})),t.default=function(e){function t(t){var r=e.call(this,t)||this;return r.canvas=null,r.ctx=null,r.requestUserMediaId=0,r.unmounted=!1,r.state={hasUserMedia:!1},r}return o(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;if(this.unmounted=!1,!l())return void t.onUserMediaError("getUserMedia not supported");e.hasUserMedia||this.requestUserMedia(),t.children&&"function"!=typeof t.children&&console.warn("children must be a function")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(!l())return void t.onUserMediaError("getUserMedia not supported");var r=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),i=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),n=e.minScreenshotWidth!==t.minScreenshotWidth,o=e.minScreenshotHeight!==t.minScreenshotHeight;(i||n||o)&&(this.canvas=null,this.ctx=null),(r||i)&&(this.stopAndCleanup(),this.requestUserMedia())},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map(function(t){e.removeTrack(t),t.stop()}),e.getAudioTracks().map(function(t){e.removeTrack(t),t.stop()})):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,r=this.props;if(!t.hasUserMedia)return null;var i=this.getCanvas(e);return i&&i.toDataURL(r.screenshotFormat,r.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,r=this.props;if(!this.video||!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var i=this.video.videoWidth,n=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var o=i/n;n=(i=r.minScreenshotWidth||this.video.clientWidth)/o,r.minScreenshotHeight&&n<r.minScreenshotHeight&&(i=(n=r.minScreenshotHeight)*o)}this.canvas=document.createElement("canvas"),this.canvas.width=(null==e?void 0:e.width)||i,this.canvas.height=(null==e?void 0:e.height)||n,this.ctx=this.canvas.getContext("2d")}var a=this.ctx,s=this.canvas;return a&&s&&(s.width=(null==e?void 0:e.width)||s.width,s.height=(null==e?void 0:e.height)||s.height,r.mirrored&&(a.translate(s.width,0),a.scale(-1,1)),a.imageSmoothingEnabled=r.imageSmoothing,a.drawImage(this.video,0,0,(null==e?void 0:e.width)||s.width,(null==e?void 0:e.height)||s.height),r.mirrored&&(a.scale(-1,1),a.translate(-s.width,0))),s},t.prototype.requestUserMedia=function(){var e=this,r=this.props,i=function(i,n){var o={video:void 0===n||n};r.audio&&(o.audio=void 0===i||i),e.requestUserMediaId++;var a=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(o).then(function(r){e.unmounted||a!==e.requestUserMediaId?t.stopMediaStream(r):e.handleUserMedia(null,r)}).catch(function(t){e.handleUserMedia(t)})};if("mediaDevices"in navigator)i(r.audioConstraints,r.videoConstraints);else{var n=function(e){return{optional:[{sourceId:e}]}},o=function(e){var t=e.deviceId;return"string"==typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"==typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources(function(e){var t=null,a=null;e.forEach(function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(a=e.id)});var s=o(r.audioConstraints);s&&(t=s);var l=o(r.videoConstraints);l&&(a=l),i(n(t),n(a))})}},t.prototype.handleUserMedia=function(e,t){var r=this.props;if(e||!t){this.setState({hasUserMedia:!1}),r.onUserMediaError(e);return}this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(e){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}r.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,r=this.props,i=r.audio,o=(r.forceScreenshotSourceSize,r.disablePictureInPicture),l=(r.onUserMedia,r.onUserMediaError,r.screenshotFormat,r.screenshotQuality,r.minScreenshotWidth,r.minScreenshotHeight,r.audioConstraints,r.videoConstraints,r.imageSmoothing,r.mirrored),c=r.style,d=void 0===c?{}:c,u=r.children,h=s(r,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),f=l?a(a({},d),{transform:(d.transform||"")+" scaleX(-1)"}):d,p={getScreenshot:this.getScreenshot.bind(this)};return n.createElement(n.Fragment,null,n.createElement("video",a({autoPlay:!0,disablePictureInPicture:o,src:t.src,muted:!i,playsInline:!0,ref:function(t){e.video=t},style:f},h)),u&&u(p))},t.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(n.Component)},react:function(e,t){e.exports=i}}).default},7492:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var i=r(5155),n=r(2115),o=r(3429),a=r.n(o),s=r(1469),l=r.n(s);let c={width:480,height:360,facingMode:"user"};function d(){let e=(0,n.useRef)(null),[t,r]=(0,n.useState)(!1),[o,s]=(0,n.useState)(null),[d,u]=(0,n.useState)(null),[h,f]=(0,n.useState)([]),[p,m]=(0,n.useState)(1),[g,v]=(0,n.useState)("white"),[y,w]=(0,n.useState)(null),[b,x]=(0,n.useState)(null),[S,M]=(0,n.useState)("My PhotoBooth âœ¨"),j=async()=>{try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(e=>e.stop()),r(!0)}catch(e){console.error("Camera error:",e),s("Camera access denied. Please enable it in browser settings.")}},U=async()=>{if(e.current)for(let t=0;t<p;t++){for(let e=3;e>0;e--)u(e),await new Promise(e=>setTimeout(e,1e3));u(null);let t=e.current.getScreenshot();if(!t)continue;let r=new Image;r.src=t,await new Promise(e=>r.onload=e);let i=document.createElement("canvas");i.width=r.width,i.height=r.height;let n=i.getContext("2d");n&&(n.translate(r.width,0),n.scale(-1,1),n.drawImage(r,0,0),f(e=>[...e,i.toDataURL("image/png")]),await new Promise(e=>setTimeout(e,1e3)))}},C=async()=>{if(0===h.length)return;let e=360*h.length+120,t=document.createElement("canvas");t.width=480,t.height=e;let r=t.getContext("2d");if(!r)return;if("white"===g)r.fillStyle="white",r.fillRect(0,0,480,e);else if("gradient"===g){let t=r.createLinearGradient(0,0,0,e);t.addColorStop(0,"#ff9a9e"),t.addColorStop(1,"#fad0c4"),r.fillStyle=t,r.fillRect(0,0,480,e)}else if("confetti"===g){r.fillStyle="#ffffff",r.fillRect(0,0,480,e);for(let t=0;t<100;t++)r.fillStyle="hsl(".concat(360*Math.random(),", 70%, 60%)"),r.beginPath(),r.arc(480*Math.random(),Math.random()*e,4,0,2*Math.PI),r.fill()}else"custom"===g&&y&&await new Promise(t=>{let i=new Image;i.src=y,i.onload=()=>{r.drawImage(i,0,0,480,e),t()}});for(let e=0;e<h.length;e++)await new Promise(t=>{let i=new Image;i.src=h[e],i.onload=()=>{let n=360*e+20;r.fillStyle="white",r.fillRect(0,n-20,480,360),r.drawImage(i,20,n,440,320),t()}});r.fillStyle="black",r.font="24px sans-serif",r.textAlign="center",r.fillText(S,240,e-50),b&&await new Promise(t=>{let i=new Image;i.src=b,i.onload=()=>{r.drawImage(i,210,e-110,60,60),t()}});let i=document.createElement("a");i.download="photobooth-strip.png",i.href=t.toDataURL("image/png"),i.click()};return(0,i.jsx)("main",{className:"min-h-screen bg-black text-white flex items-center justify-center p-6",children:(0,i.jsxs)("div",{className:"flex gap-8",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[t?(0,i.jsx)(a(),{ref:e,audio:!1,screenshotFormat:"image/png",videoConstraints:c,className:"rounded-xl shadow-lg scale-x-[-1]"}):(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center w-[480px] h-[360px] bg-gray-800 rounded-xl",children:[(0,i.jsx)("p",{className:"text-gray-300 mb-4",children:"Please allow camera access to use the PhotoBooth."}),(0,i.jsx)("button",{onClick:j,className:"bg-blue-600 px-6 py-2 rounded hover:bg-blue-700",children:"\uD83C\uDFA5 Allow Camera"}),o&&(0,i.jsx)("p",{className:"mt-2 text-red-400 text-sm",children:o})]}),d&&(0,i.jsx)("div",{className:"absolute text-6xl font-bold text-white",children:d}),(0,i.jsx)("div",{className:"flex gap-2",children:[1,2,3,4].map(e=>(0,i.jsxs)("button",{onClick:()=>m(e),className:"px-3 py-1 rounded ".concat(p===e?"bg-blue-500":"bg-gray-700"),children:[e," pic",e>1?"s":""]},e))}),(0,i.jsx)("button",{onClick:U,className:"bg-green-600 px-6 py-2 rounded hover:bg-green-700",children:"\uD83D\uDCF8 Take Photo(s)"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center gap-4 w-[300px]",children:[(0,i.jsxs)("div",{className:"rounded-xl p-4 flex flex-col gap-2 items-center justify-start",style:{background:"white"===g?"white":"gradient"===g?"linear-gradient(to bottom, #ff9a9e, #fad0c4)":"confetti"===g?"#fff":y?"url(".concat(y,")"):"white",backgroundSize:"cover"},children:[h.map((e,t)=>(0,i.jsx)(l(),{src:e,alt:"Photo ".concat(t+1),className:"w-full rounded shadow"},t)),b&&(0,i.jsx)(l(),{src:b,alt:"Logo",className:"w-12 mt-2"}),S&&(0,i.jsx)("p",{className:"text-black text-sm font-semibold",children:S})]}),(0,i.jsxs)("select",{value:g,onChange:e=>v(e.target.value),className:"bg-gray-800 p-2 rounded",children:[(0,i.jsx)("option",{value:"white",children:"White"}),(0,i.jsx)("option",{value:"gradient",children:"Gradient"}),(0,i.jsx)("option",{value:"confetti",children:"Confetti"}),(0,i.jsx)("option",{value:"custom",children:"Custom Upload"})]}),"custom"===g&&(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];if(!r)return;let i=new FileReader;i.onload=()=>w(i.result),i.readAsDataURL(r)}}),(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];if(!r)return;let i=new FileReader;i.onload=()=>x(i.result),i.readAsDataURL(r)}}),(0,i.jsx)("input",{type:"text",value:S,onChange:e=>M(e.target.value),placeholder:"Enter caption",className:"bg-gray-800 p-2 rounded w-full"}),(0,i.jsx)("button",{onClick:C,className:"bg-purple-600 px-6 py-2 rounded hover:bg-purple-700",children:"\uD83D\uDCBE Download Strip"})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[63,441,684,358],()=>t(24)),_N_E=e.O()}]);