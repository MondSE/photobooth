(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[20],{24:(e,t,l)=>{Promise.resolve().then(l.bind(l,371))},371:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>c});var a=l(5155),s=l(2115),n=l(3429),o=l.n(n),i=l(6766);let r={width:1280,height:720,facingMode:"user"};function c(){let e=(0,s.useRef)(null),[t,l]=(0,s.useState)(!1),[n,c]=(0,s.useState)(null),[d,h]=(0,s.useState)(null),[u,m]=(0,s.useState)([]),[x,f]=(0,s.useState)(1),[g,b]=(0,s.useState)("white"),[w,p]=(0,s.useState)(null),[j,v]=(0,s.useState)(null),[N,y]=(0,s.useState)("My Photo Booth ✨"),C=async()=>{try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(e=>e.stop()),l(!0)}catch(e){console.error("Camera error:",e),c("Camera access denied. Please enable it in browser settings.")}},k=async()=>{if(e.current){m([]);for(let t=0;t<x;t++){for(let e=3;e>0;e--)h(e),await new Promise(e=>setTimeout(e,1e3));h(null);let t=e.current.getScreenshot();if(!t)continue;let l=new Image;l.src=t,await new Promise(e=>{l.onload=()=>e(),l.onerror=()=>e()});let a=document.createElement("canvas");a.width=l.width,a.height=l.height;let s=a.getContext("2d");s&&(s.translate(l.width,0),s.scale(-1,1),s.drawImage(l,0,0),m(e=>[...e,a.toDataURL("image/png")]),await new Promise(e=>setTimeout(e,1e3)))}}},S=async()=>{if(0===u.length)return;let e=360*u.length+120,t=document.createElement("canvas");t.width=480,t.height=e;let l=t.getContext("2d");if(!l)return;if("white"===g)l.fillStyle="white",l.fillRect(0,0,480,e);else if("gradient"===g){let t=l.createLinearGradient(0,0,0,e);t.addColorStop(0,"#ff9a9e"),t.addColorStop(1,"#fad0c4"),l.fillStyle=t,l.fillRect(0,0,480,e)}else if("confetti"===g){l.fillStyle="#ffffff",l.fillRect(0,0,480,e);for(let t=0;t<100;t++)l.fillStyle="hsl(".concat(360*Math.random(),", 70%, 60%)"),l.beginPath(),l.arc(480*Math.random(),Math.random()*e,4,0,2*Math.PI),l.fill()}else"custom"===g&&w&&await new Promise(t=>{let a=new Image;a.src=w,a.onload=()=>{l.drawImage(a,0,0,480,e),t()}});for(let e=0;e<u.length;e++)await new Promise(t=>{let a=new Image;a.src=u[e],a.onload=()=>{let s=360*e+20;l.fillStyle="white",l.fillRect(0,s-20,480,360),l.drawImage(a,20,s,440,320),t()}});l.fillStyle="black",l.font="24px sans-serif",l.textAlign="center",l.fillText(N,240,e-50),j&&await new Promise(t=>{let a=new Image;a.src=j,a.onload=()=>{l.drawImage(a,210,e-110,60,60),t()}});let a=document.createElement("a");a.download="photobooth-strip.png",a.href=t.toDataURL("image/png"),a.click()};return(0,a.jsx)("main",{className:"min-h-screen bg-black text-white flex items-center justify-center p-6",children:(0,a.jsxs)("div",{className:"flex gap-8",children:[(0,a.jsxs)("div",{className:"relative inline-block",children:[t?(0,a.jsx)(o(),{ref:e,audio:!1,screenshotFormat:"image/png",videoConstraints:r,className:"rounded-xl shadow-lg scale-x-[-1]"}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center w-[1280px] h-[720px] bg-gray-800 rounded-xl",children:[(0,a.jsx)("p",{className:"text-gray-300 mb-4",children:"Please allow camera access to use the PhotoBooth."}),(0,a.jsx)("button",{onClick:C,className:"bg-blue-600 px-6 py-2 rounded hover:bg-blue-700",children:"\uD83C\uDFA5 Allow Camera"}),n&&(0,a.jsx)("p",{className:"mt-2 text-red-400 text-sm",children:n})]}),(0,a.jsxs)("div",{className:"absolute top-2 right-2 flex flex-col gap-2 items-end",children:[(0,a.jsxs)("select",{value:g,onChange:e=>b(e.target.value),className:"bg-gray-800 text-white text-sm p-2 rounded shadow",children:[(0,a.jsx)("option",{value:"white",children:"White"}),(0,a.jsx)("option",{value:"gradient",children:"Gradient"}),(0,a.jsx)("option",{value:"confetti",children:"Confetti"}),(0,a.jsx)("option",{value:"custom",children:"Custom Upload"})]}),"custom"===g&&(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let l=null==(t=e.target.files)?void 0:t[0];if(!l)return;let a=new FileReader;a.onload=()=>p(a.result),a.readAsDataURL(l)},className:"text-xs"})]}),(0,a.jsx)("div",{className:"absolute bottom-2 left-2",children:(0,a.jsxs)("label",{className:"bg-blue-600 text-white text-xs px-3 py-1 rounded cursor-pointer shadow hover:bg-blue-700",children:["Upload Logo",(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let l=null==(t=e.target.files)?void 0:t[0];if(!l)return;let a=new FileReader;a.onload=()=>v(a.result),a.readAsDataURL(l)},className:"hidden"})]})}),d&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-6xl font-bold text-white",children:d}),(0,a.jsx)("button",{onClick:k,className:"absolute bottom-4 left-1/2 -translate-x-1/2 rounded-full border-2 border-white/80 bg-white p-2 shadow",children:(0,a.jsx)("div",{className:"h-16 w-16 rounded-full border-4 border-white/70 bg-black/30"})}),(0,a.jsxs)("div",{className:"absolute bottom-4 right-4 flex items-center bg-black/50 rounded-lg px-3 py-2",children:[(0,a.jsx)("button",{onClick:()=>f(e=>e>1?e-1:4),className:"text-white px-2",children:"◀"}),(0,a.jsx)("span",{className:"text-white font-bold w-8 text-center",children:x}),(0,a.jsx)("button",{onClick:()=>f(e=>e<4?e+1:1),className:"text-white px-2",children:"▶"})]})]}),(0,a.jsx)("div",{className:"flex flex-col items-center gap-4 w-[300px]",children:u.length>0&&(0,a.jsxs)("div",{className:"relative bg-white rounded-lg shadow-lg inline-block h-full w-64 ",children:[(0,a.jsx)("div",{className:"flex flex-col gap-2 h-full p-4",children:u.map((e,t)=>(0,a.jsx)(i.default,{src:e,alt:"Captured ".concat(t+1),className:"w-full h-auto object-cover rounded-md border"},t))}),j&&(0,a.jsx)(i.default,{src:j,alt:"Logo",className:"absolute bottom-2 left-1/2 -translate-x-1/2 w-16 h-16 object-contain"}),(0,a.jsx)("button",{onClick:S,className:"absolute top-2 right-2 bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded shadow",children:"⬇"}),(0,a.jsx)("div",{contentEditable:!0,suppressContentEditableWarning:!0,onInput:e=>y(e.target.innerText),className:"absolute bottom-2 left-0 right-0 text-black text-sm font-semibold text-center outline-none bg-transparent cursor-text",children:N})]})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[462,441,684,358],()=>t(24)),_N_E=e.O()}]);